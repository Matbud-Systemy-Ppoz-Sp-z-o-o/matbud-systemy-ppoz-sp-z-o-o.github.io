{"version":3,"file":"static/chunks/8076-d6682fe4abbecb71.js","mappings":"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","sources":["webpack://_N_E/../../../src/client/dev/report-hmr-latency.ts","webpack://_N_E/../../../../src/client/dev/hot-reloader/app/hot-reloader-app.tsx","webpack://_N_E/../../../src/client/dev/runtime-error-handler.ts","webpack://_N_E/../../src/client/flight-data-helpers.ts","webpack://_N_E/../../../../src/client/dev/hot-reloader/turbopack-hot-reloader-common.ts","webpack://_N_E/../../../src/client/lib/console.ts","webpack://_N_E/../../../../src/client/dev/hot-reloader/get-socket-url.ts","webpack://_N_E/../../../../src/client/dev/hot-reloader/app/use-websocket.ts","webpack://_N_E/../../../../src/client/dev/hot-reloader/shared.ts","webpack://_N_E/../../src/client/has-base-path.ts","webpack://_N_E/../../../src/client/dev/noop-turbopack-hmr.ts"],"sourcesContent":["declare global {\n  interface Window {\n    __NEXT_HMR_LATENCY_CB: ((latencyMs: number) => void) | undefined\n  }\n}\n\n/**\n * Logs information about a completed HMR to the console, the server (via a\n * `client-hmr-latency` event), and to `self.__NEXT_HMR_LATENCY_CB` (a debugging\n * hook).\n *\n * @param hasUpdate Set this to `false` to avoid reporting the HMR event via a\n *   `client-hmr-latency` event or to `self.__NEXT_HMR_LATENCY_CB`. Used by\n *   turbopack when we must report a message to the browser console (because we\n *   already logged a \"rebuilding\" message), but it's not a real HMR, so we\n *   don't want to impact our telemetry.\n */\nexport default function reportHmrLatency(\n  sendMessage: (message: string) => void,\n  updatedModules: ReadonlyArray<string | number>,\n  startMsSinceEpoch: number,\n  endMsSinceEpoch: number,\n  hasUpdate: boolean = true\n) {\n  const latencyMs = endMsSinceEpoch - startMsSinceEpoch\n  console.log(`[Fast Refresh] done in ${latencyMs}ms`)\n  if (!hasUpdate) {\n    return\n  }\n  sendMessage(\n    JSON.stringify({\n      event: 'client-hmr-latency',\n      id: window.__nextDevClientId,\n      startTime: startMsSinceEpoch,\n      endTime: endMsSinceEpoch,\n      page: window.location.pathname,\n      updatedModules,\n      // Whether the page (tab) was hidden at the time the event occurred.\n      // This can impact the accuracy of the event's timing.\n      isPageHidden: document.visibilityState === 'hidden',\n    })\n  )\n  if (self.__NEXT_HMR_LATENCY_CB) {\n    self.__NEXT_HMR_LATENCY_CB(latencyMs)\n  }\n}\n","/// <reference types=\"webpack/module.d.ts\" />\n\nimport type { ReactNode } from 'react'\nimport { useEffect, startTransition, useRef } from 'react'\nimport stripAnsi from 'next/dist/compiled/strip-ansi'\nimport formatWebpackMessages from '../../../../shared/lib/format-webpack-messages'\nimport { useRouter } from '../../../components/navigation'\nimport {\n  REACT_REFRESH_FULL_RELOAD,\n  REACT_REFRESH_FULL_RELOAD_FROM_ERROR,\n  reportInvalidHmrMessage,\n} from '../shared'\nimport { dispatcher } from 'next/dist/compiled/next-devtools'\nimport { ReplaySsrOnlyErrors } from '../../../../next-devtools/userspace/app/errors/replay-ssr-only-errors'\nimport { AppDevOverlayErrorBoundary } from '../../../../next-devtools/userspace/app/app-dev-overlay-error-boundary'\nimport { useErrorHandler } from '../../../../next-devtools/userspace/app/errors/use-error-handler'\nimport { RuntimeErrorHandler } from '../../runtime-error-handler'\nimport {\n  useSendMessage,\n  useTurbopack,\n  useWebsocket,\n  useWebsocketPing,\n} from './use-websocket'\nimport { HMR_ACTIONS_SENT_TO_BROWSER } from '../../../../server/dev/hot-reloader-types'\nimport type {\n  HMR_ACTION_TYPES,\n  TurbopackMsgToBrowser,\n} from '../../../../server/dev/hot-reloader-types'\nimport { useUntrackedPathname } from '../../../components/navigation-untracked'\nimport reportHmrLatency from '../../report-hmr-latency'\nimport { TurbopackHmr } from '../turbopack-hot-reloader-common'\nimport { NEXT_HMR_REFRESH_HASH_COOKIE } from '../../../components/app-router-headers'\nimport type { GlobalErrorState } from '../../../components/app-router-instance'\nimport { useForwardConsoleLog } from '../../../../next-devtools/userspace/app/errors/use-forward-console-log'\n\nlet mostRecentCompilationHash: any = null\nlet __nextDevClientId = Math.round(Math.random() * 100 + Date.now())\nlet reloading = false\nlet webpackStartMsSinceEpoch: number | null = null\nconst turbopackHmr: TurbopackHmr | null = process.env.TURBOPACK\n  ? new TurbopackHmr()\n  : null\n\nlet pendingHotUpdateWebpack = Promise.resolve()\nlet resolvePendingHotUpdateWebpack: () => void = () => {}\nfunction setPendingHotUpdateWebpack() {\n  pendingHotUpdateWebpack = new Promise((resolve) => {\n    resolvePendingHotUpdateWebpack = () => {\n      resolve()\n    }\n  })\n}\n\nexport function waitForWebpackRuntimeHotUpdate() {\n  return pendingHotUpdateWebpack\n}\n\n// There is a newer version of the code available.\nfunction handleAvailableHash(hash: string) {\n  // Update last known compilation hash.\n  mostRecentCompilationHash = hash\n}\n\n/**\n * Is there a newer version of this code available?\n * For webpack: Check if the hash changed compared to __webpack_hash__\n * For Turbopack: Always true because it doesn't have __webpack_hash__\n */\nfunction isUpdateAvailable() {\n  if (process.env.TURBOPACK) {\n    return true\n  }\n\n  /* globals __webpack_hash__ */\n  // __webpack_hash__ is the hash of the current compilation.\n  // It's a global variable injected by Webpack.\n  return mostRecentCompilationHash !== __webpack_hash__\n}\n\n// Webpack disallows updates in other states.\nfunction canApplyUpdates() {\n  return module.hot.status() === 'idle'\n}\nfunction afterApplyUpdates(fn: any) {\n  if (canApplyUpdates()) {\n    fn()\n  } else {\n    function handler(status: any) {\n      if (status === 'idle') {\n        module.hot.removeStatusHandler(handler)\n        fn()\n      }\n    }\n    module.hot.addStatusHandler(handler)\n  }\n}\n\nfunction performFullReload(err: any, sendMessage: any) {\n  const stackTrace =\n    err &&\n    ((err.stack && err.stack.split('\\n').slice(0, 5).join('\\n')) ||\n      err.message ||\n      err + '')\n\n  sendMessage(\n    JSON.stringify({\n      event: 'client-full-reload',\n      stackTrace,\n      hadRuntimeError: !!RuntimeErrorHandler.hadRuntimeError,\n      dependencyChain: err ? err.dependencyChain : undefined,\n    })\n  )\n\n  if (reloading) return\n  reloading = true\n  window.location.reload()\n}\n\n// Attempt to update code on the fly, fall back to a hard reload.\nfunction tryApplyUpdatesWebpack(sendMessage: (message: string) => void) {\n  if (!isUpdateAvailable() || !canApplyUpdates()) {\n    resolvePendingHotUpdateWebpack()\n    dispatcher.onBuildOk()\n    reportHmrLatency(sendMessage, [], webpackStartMsSinceEpoch!, Date.now())\n    return\n  }\n\n  function handleApplyUpdates(\n    err: any,\n    updatedModules: (string | number)[] | null\n  ) {\n    if (err || RuntimeErrorHandler.hadRuntimeError || updatedModules == null) {\n      if (err) {\n        console.warn(REACT_REFRESH_FULL_RELOAD)\n      } else if (RuntimeErrorHandler.hadRuntimeError) {\n        console.warn(REACT_REFRESH_FULL_RELOAD_FROM_ERROR)\n      }\n      performFullReload(err, sendMessage)\n      return\n    }\n\n    dispatcher.onBuildOk()\n\n    if (isUpdateAvailable()) {\n      // While we were updating, there was a new update! Do it again.\n      tryApplyUpdatesWebpack(sendMessage)\n      return\n    }\n\n    dispatcher.onRefresh()\n    resolvePendingHotUpdateWebpack()\n    reportHmrLatency(\n      sendMessage,\n      updatedModules,\n      webpackStartMsSinceEpoch!,\n      Date.now()\n    )\n\n    if (process.env.__NEXT_TEST_MODE) {\n      afterApplyUpdates(() => {\n        if (self.__NEXT_HMR_CB) {\n          self.__NEXT_HMR_CB()\n          self.__NEXT_HMR_CB = null\n        }\n      })\n    }\n  }\n\n  // https://webpack.js.org/api/hot-module-replacement/#check\n  module.hot\n    .check(/* autoApply */ false)\n    .then((updatedModules: (string | number)[] | null) => {\n      if (updatedModules == null) {\n        return null\n      }\n\n      // We should always handle an update, even if updatedModules is empty (but\n      // non-null) for any reason. That's what webpack would normally do:\n      // https://github.com/webpack/webpack/blob/3aa6b6bc3a64/lib/hmr/HotModuleReplacement.runtime.js#L296-L298\n      dispatcher.onBeforeRefresh()\n      // https://webpack.js.org/api/hot-module-replacement/#apply\n      return module.hot.apply()\n    })\n    .then(\n      (updatedModules: (string | number)[] | null) => {\n        handleApplyUpdates(null, updatedModules)\n      },\n      (err: any) => {\n        handleApplyUpdates(err, null)\n      }\n    )\n}\n\n/** Handles messages from the server for the App Router. */\nfunction processMessage(\n  obj: HMR_ACTION_TYPES,\n  sendMessage: (message: string) => void,\n  processTurbopackMessage: (msg: TurbopackMsgToBrowser) => void,\n  router: ReturnType<typeof useRouter>,\n  appIsrManifestRef: ReturnType<typeof useRef>,\n  pathnameRef: ReturnType<typeof useRef>\n) {\n  if (!('action' in obj)) {\n    return\n  }\n\n  function handleErrors(errors: ReadonlyArray<unknown>) {\n    // \"Massage\" webpack messages.\n    const formatted = formatWebpackMessages({\n      errors: errors,\n      warnings: [],\n    })\n\n    // Only show the first error.\n    dispatcher.onBuildError(formatted.errors[0])\n\n    // Also log them to the console.\n    for (let i = 0; i < formatted.errors.length; i++) {\n      console.error(stripAnsi(formatted.errors[i]))\n    }\n\n    // Do not attempt to reload now.\n    // We will reload on next success instead.\n    if (process.env.__NEXT_TEST_MODE) {\n      if (self.__NEXT_HMR_CB) {\n        self.__NEXT_HMR_CB(formatted.errors[0])\n        self.__NEXT_HMR_CB = null\n      }\n    }\n  }\n\n  function handleHotUpdate() {\n    if (process.env.TURBOPACK) {\n      const hmrUpdate = turbopackHmr!.onBuilt()\n      if (hmrUpdate != null) {\n        reportHmrLatency(\n          sendMessage,\n          [...hmrUpdate.updatedModules],\n          hmrUpdate.startMsSinceEpoch,\n          hmrUpdate.endMsSinceEpoch,\n          // suppress the `client-hmr-latency` event if the update was a no-op:\n          hmrUpdate.hasUpdates\n        )\n      }\n      dispatcher.onBuildOk()\n    } else {\n      tryApplyUpdatesWebpack(sendMessage)\n    }\n  }\n\n  switch (obj.action) {\n    case HMR_ACTIONS_SENT_TO_BROWSER.ISR_MANIFEST: {\n      if (process.env.__NEXT_DEV_INDICATOR) {\n        if (appIsrManifestRef) {\n          appIsrManifestRef.current = obj.data\n\n          // handle initial status on receiving manifest\n          // navigation is handled in useEffect for pathname changes\n          // as we'll receive the updated manifest before usePathname\n          // triggers for new value\n          if ((pathnameRef.current as string) in obj.data) {\n            dispatcher.onStaticIndicator(true)\n          } else {\n            dispatcher.onStaticIndicator(false)\n          }\n        }\n      }\n      break\n    }\n    case HMR_ACTIONS_SENT_TO_BROWSER.BUILDING: {\n      dispatcher.buildingIndicatorShow()\n\n      if (process.env.TURBOPACK) {\n        turbopackHmr!.onBuilding()\n      } else {\n        webpackStartMsSinceEpoch = Date.now()\n        setPendingHotUpdateWebpack()\n        console.log('[Fast Refresh] rebuilding')\n      }\n      break\n    }\n    case HMR_ACTIONS_SENT_TO_BROWSER.BUILT:\n    case HMR_ACTIONS_SENT_TO_BROWSER.SYNC: {\n      dispatcher.buildingIndicatorHide()\n\n      if (obj.hash) {\n        handleAvailableHash(obj.hash)\n      }\n\n      const { errors, warnings } = obj\n\n      // Is undefined when it's a 'built' event\n      if ('versionInfo' in obj) dispatcher.onVersionInfo(obj.versionInfo)\n      if ('debug' in obj && obj.debug) dispatcher.onDebugInfo(obj.debug)\n      if ('devIndicator' in obj) dispatcher.onDevIndicator(obj.devIndicator)\n      if ('devToolsConfig' in obj)\n        dispatcher.onDevToolsConfig(obj.devToolsConfig)\n\n      const hasErrors = Boolean(errors && errors.length)\n      // Compilation with errors (e.g. syntax error or missing modules).\n      if (hasErrors) {\n        sendMessage(\n          JSON.stringify({\n            event: 'client-error',\n            errorCount: errors.length,\n            clientId: __nextDevClientId,\n          })\n        )\n\n        handleErrors(errors)\n        return\n      }\n\n      const hasWarnings = Boolean(warnings && warnings.length)\n      if (hasWarnings) {\n        sendMessage(\n          JSON.stringify({\n            event: 'client-warning',\n            warningCount: warnings.length,\n            clientId: __nextDevClientId,\n          })\n        )\n\n        // Print warnings to the console.\n        const formattedMessages = formatWebpackMessages({\n          warnings: warnings,\n          errors: [],\n        })\n\n        for (let i = 0; i < formattedMessages.warnings.length; i++) {\n          if (i === 5) {\n            console.warn(\n              'There were more warnings in other files.\\n' +\n                'You can find a complete log in the terminal.'\n            )\n            break\n          }\n          console.warn(stripAnsi(formattedMessages.warnings[i]))\n        }\n\n        // No early return here as we need to apply modules in the same way between warnings only and compiles without warnings\n      }\n\n      sendMessage(\n        JSON.stringify({\n          event: 'client-success',\n          clientId: __nextDevClientId,\n        })\n      )\n\n      if (obj.action === HMR_ACTIONS_SENT_TO_BROWSER.BUILT) {\n        handleHotUpdate()\n      }\n      return\n    }\n    case HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_CONNECTED: {\n      processTurbopackMessage({\n        type: HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_CONNECTED,\n        data: {\n          sessionId: obj.data.sessionId,\n        },\n      })\n      break\n    }\n    case HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_MESSAGE: {\n      turbopackHmr!.onTurbopackMessage(obj)\n      dispatcher.onBeforeRefresh()\n      processTurbopackMessage({\n        type: HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_MESSAGE,\n        data: obj.data,\n      })\n      if (RuntimeErrorHandler.hadRuntimeError) {\n        console.warn(REACT_REFRESH_FULL_RELOAD_FROM_ERROR)\n        performFullReload(null, sendMessage)\n      }\n      dispatcher.onRefresh()\n      break\n    }\n    // TODO-APP: make server component change more granular\n    case HMR_ACTIONS_SENT_TO_BROWSER.SERVER_COMPONENT_CHANGES: {\n      turbopackHmr?.onServerComponentChanges()\n      sendMessage(\n        JSON.stringify({\n          event: 'server-component-reload-page',\n          clientId: __nextDevClientId,\n          hash: obj.hash,\n        })\n      )\n\n      // Store the latest hash in a session cookie so that it's sent back to the\n      // server with any subsequent requests.\n      document.cookie = `${NEXT_HMR_REFRESH_HASH_COOKIE}=${obj.hash};path=/`\n\n      if (\n        RuntimeErrorHandler.hadRuntimeError ||\n        document.documentElement.id === '__next_error__'\n      ) {\n        if (reloading) return\n        reloading = true\n        return window.location.reload()\n      }\n\n      startTransition(() => {\n        router.hmrRefresh()\n        dispatcher.onRefresh()\n      })\n\n      if (process.env.__NEXT_TEST_MODE) {\n        if (self.__NEXT_HMR_CB) {\n          self.__NEXT_HMR_CB()\n          self.__NEXT_HMR_CB = null\n        }\n      }\n\n      return\n    }\n    case HMR_ACTIONS_SENT_TO_BROWSER.RELOAD_PAGE: {\n      turbopackHmr?.onReloadPage()\n      sendMessage(\n        JSON.stringify({\n          event: 'client-reload-page',\n          clientId: __nextDevClientId,\n        })\n      )\n      if (reloading) return\n      reloading = true\n      return window.location.reload()\n    }\n    case HMR_ACTIONS_SENT_TO_BROWSER.ADDED_PAGE:\n    case HMR_ACTIONS_SENT_TO_BROWSER.REMOVED_PAGE: {\n      turbopackHmr?.onPageAddRemove()\n      // TODO-APP: potentially only refresh if the currently viewed page was added/removed.\n      return router.hmrRefresh()\n    }\n    case HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ERROR: {\n      const { errorJSON } = obj\n      if (errorJSON) {\n        const { message, stack } = JSON.parse(errorJSON)\n        const error = new Error(message)\n        error.stack = stack\n        handleErrors([error])\n      }\n      return\n    }\n    case HMR_ACTIONS_SENT_TO_BROWSER.DEV_PAGES_MANIFEST_UPDATE: {\n      return\n    }\n    case HMR_ACTIONS_SENT_TO_BROWSER.DEVTOOLS_CONFIG: {\n      dispatcher.onDevToolsConfig(obj.data)\n      return\n    }\n    default: {\n      obj satisfies never\n    }\n  }\n}\n\nexport default function HotReload({\n  assetPrefix,\n  children,\n  globalError,\n}: {\n  assetPrefix: string\n  children: ReactNode\n  globalError: GlobalErrorState\n}) {\n  useErrorHandler(dispatcher.onUnhandledError, dispatcher.onUnhandledRejection)\n\n  const webSocketRef = useWebsocket(assetPrefix)\n\n  useWebsocketPing(webSocketRef)\n  const sendMessage = useSendMessage(webSocketRef)\n  useForwardConsoleLog(webSocketRef)\n  const processTurbopackMessage = useTurbopack(sendMessage, (err) =>\n    performFullReload(err, sendMessage)\n  )\n\n  const router = useRouter()\n\n  // We don't want access of the pathname for the dev tools to trigger a dynamic\n  // access (as the dev overlay will never be present in production).\n  const pathname = useUntrackedPathname()\n  const appIsrManifestRef = useRef<Record<string, false | number>>({})\n  const pathnameRef = useRef(pathname)\n\n  if (process.env.__NEXT_DEV_INDICATOR) {\n    // this conditional is only for dead-code elimination which\n    // isn't a runtime conditional only build-time so ignore hooks rule\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(() => {\n      pathnameRef.current = pathname\n\n      const appIsrManifest = appIsrManifestRef.current\n\n      if (appIsrManifest) {\n        if (pathname && pathname in appIsrManifest) {\n          try {\n            dispatcher.onStaticIndicator(true)\n          } catch (reason) {\n            let message = ''\n\n            if (reason instanceof DOMException) {\n              // Most likely a SecurityError, because of an unavailable localStorage\n              message = reason.stack ?? reason.message\n            } else if (reason instanceof Error) {\n              message = 'Error: ' + reason.message + '\\n' + (reason.stack ?? '')\n            } else {\n              message = 'Unexpected Exception: ' + reason\n            }\n\n            console.warn('[HMR] ' + message)\n          }\n        } else {\n          dispatcher.onStaticIndicator(false)\n        }\n      }\n    }, [pathname])\n  }\n\n  useEffect(() => {\n    const websocket = webSocketRef.current\n    if (!websocket) return\n\n    const handler = (event: MessageEvent<any>) => {\n      try {\n        const obj = JSON.parse(event.data)\n        processMessage(\n          obj,\n          sendMessage,\n          processTurbopackMessage,\n          router,\n          appIsrManifestRef,\n          pathnameRef\n        )\n      } catch (err: unknown) {\n        reportInvalidHmrMessage(event, err)\n      }\n    }\n\n    websocket.addEventListener('message', handler)\n    return () => websocket.removeEventListener('message', handler)\n  }, [\n    sendMessage,\n    router,\n    webSocketRef,\n    processTurbopackMessage,\n    appIsrManifestRef,\n  ])\n  return (\n    <AppDevOverlayErrorBoundary globalError={globalError}>\n      <ReplaySsrOnlyErrors onBlockingError={dispatcher.openErrorOverlay} />\n      {children}\n    </AppDevOverlayErrorBoundary>\n  )\n}\n","export const RuntimeErrorHandler = {\n  hadRuntimeError: false,\n}\n","import type {\n  CacheNodeSeedData,\n  FlightData,\n  FlightDataPath,\n  FlightRouterState,\n  FlightSegmentPath,\n  Segment,\n} from '../server/app-render/types'\nimport type { HeadData } from '../shared/lib/app-router-context.shared-runtime'\nimport { PAGE_SEGMENT_KEY } from '../shared/lib/segment'\n\nexport type NormalizedFlightData = {\n  /**\n   * The full `FlightSegmentPath` inclusive of the final `Segment`\n   */\n  segmentPath: FlightSegmentPath\n  /**\n   * The `FlightSegmentPath` exclusive of the final `Segment`\n   */\n  pathToSegment: FlightSegmentPath\n  segment: Segment\n  tree: FlightRouterState\n  seedData: CacheNodeSeedData | null\n  head: HeadData\n  isHeadPartial: boolean\n  isRootRender: boolean\n}\n\n// TODO: We should only have to export `normalizeFlightData`, however because the initial flight data\n// that gets passed to `createInitialRouterState` doesn't conform to the `FlightDataPath` type (it's missing the root segment)\n// we're currently exporting it so we can use it directly. This should be fixed as part of the unification of\n// the different ways we express `FlightSegmentPath`.\nexport function getFlightDataPartsFromPath(\n  flightDataPath: FlightDataPath\n): NormalizedFlightData {\n  // Pick the last 4 items from the `FlightDataPath` to get the [tree, seedData, viewport, isHeadPartial].\n  const flightDataPathLength = 4\n  // tree, seedData, and head are *always* the last three items in the `FlightDataPath`.\n  const [tree, seedData, head, isHeadPartial] =\n    flightDataPath.slice(-flightDataPathLength)\n  // The `FlightSegmentPath` is everything except the last three items. For a root render, it won't be present.\n  const segmentPath = flightDataPath.slice(0, -flightDataPathLength)\n\n  return {\n    // TODO: Unify these two segment path helpers. We are inconsistently pushing an empty segment (\"\")\n    // to the start of the segment path in some places which makes it hard to use solely the segment path.\n    // Look for \"// TODO-APP: remove ''\" in the codebase.\n    pathToSegment: segmentPath.slice(0, -1),\n    segmentPath,\n    // if the `FlightDataPath` corresponds with the root, there'll be no segment path,\n    // in which case we default to ''.\n    segment: segmentPath[segmentPath.length - 1] ?? '',\n    tree,\n    seedData,\n    head,\n    isHeadPartial,\n    isRootRender: flightDataPath.length === flightDataPathLength,\n  }\n}\n\nexport function getNextFlightSegmentPath(\n  flightSegmentPath: FlightSegmentPath\n): FlightSegmentPath {\n  // Since `FlightSegmentPath` is a repeated tuple of `Segment` and `ParallelRouteKey`, we slice off two items\n  // to get the next segment path.\n  return flightSegmentPath.slice(2)\n}\n\nexport function normalizeFlightData(\n  flightData: FlightData\n): NormalizedFlightData[] | string {\n  // FlightData can be a string when the server didn't respond with a proper flight response,\n  // or when a redirect happens, to signal to the client that it needs to perform an MPA navigation.\n  if (typeof flightData === 'string') {\n    return flightData\n  }\n\n  return flightData.map((flightDataPath) =>\n    getFlightDataPartsFromPath(flightDataPath)\n  )\n}\n\n/**\n * This function is used to prepare the flight router state for the request.\n * It removes markers that are not needed by the server, and are purely used\n * for stashing state on the client.\n * @param flightRouterState - The flight router state to prepare.\n * @param isHmrRefresh - Whether this is an HMR refresh request.\n * @returns The prepared flight router state.\n */\nexport function prepareFlightRouterStateForRequest(\n  flightRouterState: FlightRouterState,\n  isHmrRefresh?: boolean\n): string {\n  // HMR requests need the complete, unmodified state for proper functionality\n  if (isHmrRefresh) {\n    return encodeURIComponent(JSON.stringify(flightRouterState))\n  }\n\n  return encodeURIComponent(\n    JSON.stringify(stripClientOnlyDataFromFlightRouterState(flightRouterState))\n  )\n}\n\n/**\n * Recursively strips client-only data from FlightRouterState while preserving\n * server-needed information for proper rendering decisions.\n */\nfunction stripClientOnlyDataFromFlightRouterState(\n  flightRouterState: FlightRouterState\n): FlightRouterState {\n  const [\n    segment,\n    parallelRoutes,\n    _url, // Intentionally unused - URLs are client-only\n    refreshMarker,\n    isRootLayout,\n    hasLoadingBoundary,\n  ] = flightRouterState\n\n  // __PAGE__ segments are always fetched from the server, so there's\n  // no need to send them up\n  const cleanedSegment = stripSearchParamsFromPageSegment(segment)\n\n  // Recursively process parallel routes\n  const cleanedParallelRoutes: { [key: string]: FlightRouterState } = {}\n  for (const [key, childState] of Object.entries(parallelRoutes)) {\n    cleanedParallelRoutes[key] =\n      stripClientOnlyDataFromFlightRouterState(childState)\n  }\n\n  const result: FlightRouterState = [\n    cleanedSegment,\n    cleanedParallelRoutes,\n    null, // URLs omitted - server reconstructs paths from segments\n    shouldPreserveRefreshMarker(refreshMarker) ? refreshMarker : null,\n  ]\n\n  // Append optional fields if present\n  if (isRootLayout !== undefined) {\n    result[4] = isRootLayout\n  }\n  if (hasLoadingBoundary !== undefined) {\n    result[5] = hasLoadingBoundary\n  }\n\n  return result\n}\n\n/**\n * Strips search parameters from __PAGE__ segments to prevent sensitive\n * client-side data from being sent to the server.\n */\nfunction stripSearchParamsFromPageSegment(segment: Segment): Segment {\n  if (\n    typeof segment === 'string' &&\n    segment.startsWith(PAGE_SEGMENT_KEY + '?')\n  ) {\n    return PAGE_SEGMENT_KEY\n  }\n  return segment\n}\n\n/**\n * Determines whether the refresh marker should be sent to the server\n * Client-only markers like 'refresh' are stripped, while server-needed markers\n * like 'refetch' and 'inside-shared-layout' are preserved.\n */\nfunction shouldPreserveRefreshMarker(\n  refreshMarker: FlightRouterState[3]\n): boolean {\n  return Boolean(refreshMarker && refreshMarker !== 'refresh')\n}\n","import type { TurbopackMessageAction } from '../../../server/dev/hot-reloader-types'\nimport type { Update as TurbopackUpdate } from '../../../build/swc/types'\n\ndeclare global {\n  interface Window {\n    __NEXT_HMR_TURBOPACK_REPORT_NOISY_NOOP_EVENTS: boolean | undefined\n  }\n}\n\n// How long to wait before reporting the HMR start, used to suppress irrelevant\n// `BUILDING` events. Does not impact reported latency.\nconst TURBOPACK_HMR_START_DELAY_MS = 100\n\ninterface HmrUpdate {\n  hasUpdates: boolean\n  updatedModules: Set<string>\n  startMsSinceEpoch: number\n  endMsSinceEpoch: number\n}\n\nexport class TurbopackHmr {\n  #updatedModules: Set<string>\n  #startMsSinceEpoch: number | undefined\n  #lastUpdateMsSinceEpoch: number | undefined\n  #deferredReportHmrStartId: ReturnType<typeof setTimeout> | undefined\n  #reportedHmrStart: boolean\n\n  constructor() {\n    this.#updatedModules = new Set()\n    this.#reportedHmrStart = false\n  }\n\n  // HACK: Turbopack tends to generate a lot of irrelevant \"BUILDING\" actions,\n  // as it reports *any* compilation, including fully no-op/cached compilations\n  // and those unrelated to HMR. Fixing this would require significant\n  // architectural changes.\n  //\n  // Work around this by deferring any \"rebuilding\" message by 100ms. If we get\n  // a BUILT event within that threshold and nothing has changed, just suppress\n  // the message entirely.\n  #runDeferredReportHmrStart() {\n    if (this.#deferredReportHmrStartId != null) {\n      console.log('[Fast Refresh] rebuilding')\n      this.#reportedHmrStart = true\n      this.#cancelDeferredReportHmrStart()\n    }\n  }\n\n  #cancelDeferredReportHmrStart() {\n    clearTimeout(this.#deferredReportHmrStartId)\n    this.#deferredReportHmrStartId = undefined\n  }\n\n  onBuilding() {\n    this.#lastUpdateMsSinceEpoch = undefined\n    this.#cancelDeferredReportHmrStart()\n    this.#startMsSinceEpoch = Date.now()\n\n    // report the HMR start after a short delay\n    this.#deferredReportHmrStartId = setTimeout(\n      () => this.#runDeferredReportHmrStart(),\n      // debugging feature: don't defer/suppress noisy no-op HMR update messages\n      self.__NEXT_HMR_TURBOPACK_REPORT_NOISY_NOOP_EVENTS\n        ? 0\n        : TURBOPACK_HMR_START_DELAY_MS\n    )\n  }\n\n  /** Helper for other `onEvent` methods. */\n  #onUpdate() {\n    this.#runDeferredReportHmrStart()\n    this.#lastUpdateMsSinceEpoch = Date.now()\n  }\n\n  onTurbopackMessage(msg: TurbopackMessageAction) {\n    this.#onUpdate()\n    const updatedModules = extractModulesFromTurbopackMessage(msg.data)\n    for (const module of updatedModules) {\n      this.#updatedModules.add(module)\n    }\n  }\n\n  onServerComponentChanges() {\n    this.#onUpdate()\n  }\n\n  onReloadPage() {\n    this.#onUpdate()\n  }\n\n  onPageAddRemove() {\n    this.#onUpdate()\n  }\n\n  /**\n   * @returns `null` if the caller should ignore the update entirely. Returns an\n   *   object with `hasUpdates: false` if the caller should report the end of\n   *   the HMR in the browser console, but the HMR was a no-op.\n   */\n  onBuilt(): HmrUpdate | null {\n    // Check that we got *any* `TurbopackMessageAction`, even if\n    // `updatedModules` is empty (not everything gets recorded there).\n    //\n    // There's also a case where `onBuilt` gets called before `onBuilding`,\n    // which can happen during initial page load. Ignore that too!\n    const hasUpdates =\n      this.#lastUpdateMsSinceEpoch != null && this.#startMsSinceEpoch != null\n    if (!hasUpdates && !this.#reportedHmrStart) {\n      // suppress the update entirely\n      this.#cancelDeferredReportHmrStart()\n      return null\n    }\n    this.#runDeferredReportHmrStart()\n\n    const result = {\n      hasUpdates,\n      updatedModules: this.#updatedModules,\n      startMsSinceEpoch: this.#startMsSinceEpoch!,\n      endMsSinceEpoch: this.#lastUpdateMsSinceEpoch ?? Date.now(),\n    }\n    this.#updatedModules = new Set()\n    this.#reportedHmrStart = false\n    return result\n  }\n}\n\nfunction extractModulesFromTurbopackMessage(\n  data: TurbopackUpdate | TurbopackUpdate[]\n): Set<string> {\n  const updatedModules: Set<string> = new Set()\n\n  const updates = Array.isArray(data) ? data : [data]\n  for (const update of updates) {\n    // TODO this won't capture changes to CSS since they don't result in a \"merged\" update\n    if (\n      update.type !== 'partial' ||\n      update.instruction.type !== 'ChunkListUpdate' ||\n      update.instruction.merged === undefined\n    ) {\n      continue\n    }\n\n    for (const mergedUpdate of update.instruction.merged) {\n      for (const name of Object.keys(mergedUpdate.entries)) {\n        const res = /(.*)\\s+\\[.*/.exec(name)\n        if (res === null) {\n          console.error(\n            '[Turbopack HMR] Expected module to match pattern: ' + name\n          )\n          continue\n        }\n\n        updatedModules.add(res[1])\n      }\n    }\n  }\n\n  return updatedModules\n}\n","import isError from '../../lib/is-error'\n\nfunction formatObject(arg: unknown, depth: number) {\n  switch (typeof arg) {\n    case 'object':\n      if (arg === null) {\n        return 'null'\n      } else if (Array.isArray(arg)) {\n        let result = '['\n        if (depth < 1) {\n          for (let i = 0; i < arg.length; i++) {\n            if (result !== '[') {\n              result += ','\n            }\n            if (Object.prototype.hasOwnProperty.call(arg, i)) {\n              result += formatObject(arg[i], depth + 1)\n            }\n          }\n        } else {\n          result += arg.length > 0 ? '...' : ''\n        }\n        result += ']'\n        return result\n      } else if (arg instanceof Error) {\n        return arg + ''\n      } else {\n        const keys = Object.keys(arg)\n        let result = '{'\n        if (depth < 1) {\n          for (let i = 0; i < keys.length; i++) {\n            const key = keys[i]\n            const desc = Object.getOwnPropertyDescriptor(arg, 'key')\n            if (desc && !desc.get && !desc.set) {\n              const jsonKey = JSON.stringify(key)\n              if (jsonKey !== '\"' + key + '\"') {\n                result += jsonKey + ': '\n              } else {\n                result += key + ': '\n              }\n              result += formatObject(desc.value, depth + 1)\n            }\n          }\n        } else {\n          result += keys.length > 0 ? '...' : ''\n        }\n        result += '}'\n        return result\n      }\n    case 'string':\n      return JSON.stringify(arg)\n    case 'number':\n    case 'bigint':\n    case 'boolean':\n    case 'symbol':\n    case 'undefined':\n    case 'function':\n    default:\n      return String(arg)\n  }\n}\n\nexport function formatConsoleArgs(args: unknown[]): string {\n  let message: string\n  let idx: number\n  if (typeof args[0] === 'string') {\n    message = args[0]\n    idx = 1\n  } else {\n    message = ''\n    idx = 0\n  }\n  let result = ''\n  let startQuote = false\n  for (let i = 0; i < message.length; ++i) {\n    const char = message[i]\n    if (char !== '%' || i === message.length - 1 || idx >= args.length) {\n      result += char\n      continue\n    }\n\n    const code = message[++i]\n    switch (code) {\n      case 'c': {\n        // TODO: We should colorize with HTML instead of turning into a string.\n        // Ignore for now.\n        result = startQuote ? `${result}]` : `[${result}`\n        startQuote = !startQuote\n        idx++\n        break\n      }\n      case 'O':\n      case 'o': {\n        result += formatObject(args[idx++], 0)\n        break\n      }\n      case 'd':\n      case 'i': {\n        result += parseInt(args[idx++] as any, 10)\n        break\n      }\n      case 'f': {\n        result += parseFloat(args[idx++] as any)\n        break\n      }\n      case 's': {\n        result += String(args[idx++])\n        break\n      }\n      default:\n        result += '%' + code\n    }\n  }\n\n  for (; idx < args.length; idx++) {\n    result += (idx > 0 ? ' ' : '') + formatObject(args[idx], 0)\n  }\n\n  return result\n}\n\nexport function parseConsoleArgs(args: unknown[]): {\n  environmentName: string | null\n  error: Error | null\n} {\n  // See\n  // https://github.com/facebook/react/blob/65a56d0e99261481c721334a3ec4561d173594cd/packages/react-devtools-shared/src/backend/flight/renderer.js#L88-L93\n  //\n  // Logs replayed from the server look like this:\n  // [\n  //   \"%c%s%c%o\\n\\n%s\\n\\n%s\\n\",\n  //   \"background: #e6e6e6; ...\",\n  //   \" Server \", // can also be e.g. \" Prerender \"\n  //   \"\",\n  //   Error,\n  //   \"The above error occurred in the <Page> component.\",\n  //   ...\n  // ]\n  if (\n    args.length > 3 &&\n    typeof args[0] === 'string' &&\n    args[0].startsWith('%c%s%c') &&\n    typeof args[1] === 'string' &&\n    typeof args[2] === 'string' &&\n    typeof args[3] === 'string'\n  ) {\n    const environmentName = args[2]\n    const maybeError = args[4]\n\n    return {\n      environmentName: environmentName.trim(),\n      error: isError(maybeError) ? maybeError : null,\n    }\n  }\n\n  return {\n    environmentName: null,\n    error: null,\n  }\n}\n","import { normalizedAssetPrefix } from '../../../shared/lib/normalized-asset-prefix'\n\nfunction getSocketProtocol(assetPrefix: string): string {\n  let protocol = window.location.protocol\n\n  try {\n    // assetPrefix is a url\n    protocol = new URL(assetPrefix).protocol\n  } catch {}\n\n  return protocol === 'http:' ? 'ws:' : 'wss:'\n}\n\nexport function getSocketUrl(assetPrefix: string | undefined): string {\n  const prefix = normalizedAssetPrefix(assetPrefix)\n  const protocol = getSocketProtocol(assetPrefix || '')\n\n  if (URL.canParse(prefix)) {\n    // since normalized asset prefix is ensured to be a URL format,\n    // we can safely replace the protocol\n    return prefix.replace(/^http/, 'ws')\n  }\n\n  const { hostname, port } = window.location\n  return `${protocol}//${hostname}${port ? `:${port}` : ''}${prefix}`\n}\n","import { useCallback, useContext, useEffect, useRef } from 'react'\nimport { GlobalLayoutRouterContext } from '../../../../shared/lib/app-router-context.shared-runtime'\nimport { getSocketUrl } from '../get-socket-url'\nimport type { TurbopackMsgToBrowser } from '../../../../server/dev/hot-reloader-types'\n\nexport function useWebsocket(assetPrefix: string) {\n  const webSocketRef = useRef<WebSocket>(undefined)\n\n  useEffect(() => {\n    if (webSocketRef.current) {\n      return\n    }\n\n    const url = getSocketUrl(assetPrefix)\n\n    webSocketRef.current = new window.WebSocket(`${url}/_next/webpack-hmr`)\n  }, [assetPrefix])\n\n  return webSocketRef\n}\n\nexport function useSendMessage(webSocketRef: ReturnType<typeof useWebsocket>) {\n  const sendMessage = useCallback(\n    (data: string) => {\n      const socket = webSocketRef.current\n      if (!socket || socket.readyState !== socket.OPEN) {\n        return\n      }\n      return socket.send(data)\n    },\n    [webSocketRef]\n  )\n  return sendMessage\n}\n\nexport function useTurbopack(\n  sendMessage: ReturnType<typeof useSendMessage>,\n  onUpdateError: (err: unknown) => void\n) {\n  const turbopackState = useRef<{\n    init: boolean\n    queue: Array<TurbopackMsgToBrowser> | undefined\n    callback: ((msg: TurbopackMsgToBrowser) => void) | undefined\n  }>({\n    init: false,\n    // Until the dynamic import resolves, queue any turbopack messages which will be replayed.\n    queue: [],\n    callback: undefined,\n  })\n\n  const processTurbopackMessage = useCallback((msg: TurbopackMsgToBrowser) => {\n    const { callback, queue } = turbopackState.current\n    if (callback) {\n      callback(msg)\n    } else {\n      queue!.push(msg)\n    }\n  }, [])\n\n  useEffect(() => {\n    const { current: initCurrent } = turbopackState\n    // TODO(WEB-1589): only install if `process.turbopack` set.\n    if (initCurrent.init) {\n      return\n    }\n    initCurrent.init = true\n\n    import(\n      // @ts-expect-error requires \"moduleResolution\": \"node16\" in tsconfig.json and not .ts extension\n      '@vercel/turbopack-ecmascript-runtime/browser/dev/hmr-client/hmr-client.ts'\n    ).then(({ connect }) => {\n      const { current } = turbopackState\n      connect({\n        addMessageListener(cb: (msg: TurbopackMsgToBrowser) => void) {\n          current.callback = cb\n\n          // Replay all Turbopack messages before we were able to establish the HMR client.\n          for (const msg of current.queue!) {\n            cb(msg)\n          }\n          current.queue = undefined\n        },\n        sendMessage,\n        onUpdateError,\n      })\n    })\n  }, [sendMessage, onUpdateError])\n\n  return processTurbopackMessage\n}\n\nexport function useWebsocketPing(\n  websocketRef: ReturnType<typeof useWebsocket>\n) {\n  const sendMessage = useSendMessage(websocketRef)\n  const { tree } = useContext(GlobalLayoutRouterContext)\n\n  useEffect(() => {\n    // Never send pings when using Turbopack as it's not used.\n    // Pings were originally used to keep track of active routes in on-demand-entries with webpack.\n    if (process.env.TURBOPACK) {\n      return\n    }\n\n    // Taken from on-demand-entries-client.js\n    const interval = setInterval(() => {\n      sendMessage(\n        JSON.stringify({\n          event: 'ping',\n          tree,\n          appDirRoute: true,\n        })\n      )\n    }, 2500)\n    return () => clearInterval(interval)\n  }, [tree, sendMessage])\n}\n","import type { HMR_ACTION_TYPES } from '../../../server/dev/hot-reloader-types'\n\nexport const REACT_REFRESH_FULL_RELOAD =\n  '[Fast Refresh] performing full reload\\n\\n' +\n  \"Fast Refresh will perform a full reload when you edit a file that's imported by modules outside of the React rendering tree.\\n\" +\n  'You might have a file which exports a React component but also exports a value that is imported by a non-React component file.\\n' +\n  'Consider migrating the non-React component export to a separate file and importing it into both files.\\n\\n' +\n  'It is also possible the parent component of the component you edited is a class component, which disables Fast Refresh.\\n' +\n  'Fast Refresh requires at least one parent function component in your React tree.'\n\nexport const REACT_REFRESH_FULL_RELOAD_FROM_ERROR =\n  '[Fast Refresh] performing full reload because your application had an unrecoverable error'\n\nexport function reportInvalidHmrMessage(\n  message: HMR_ACTION_TYPES | MessageEvent<unknown>,\n  err: unknown\n) {\n  console.warn(\n    '[HMR] Invalid message: ' +\n      JSON.stringify(message) +\n      '\\n' +\n      ((err instanceof Error && err?.stack) || '')\n  )\n}\n","import { pathHasPrefix } from '../shared/lib/router/utils/path-has-prefix'\n\nconst basePath = (process.env.__NEXT_ROUTER_BASEPATH as string) || ''\n\nexport function hasBasePath(path: string): boolean {\n  return pathHasPrefix(path, basePath)\n}\n","// The Turbopack HMR client can't be properly omitted at the moment (WEB-1589),\n// so instead we remap its import to this file in webpack builds.\nexport function connect() {}\n"],"names":["reportHmrLatency","sendMessage","updatedModules","startMsSinceEpoch","endMsSinceEpoch","hasUpdate","JSON","event","id","window","__nextDevClientId","startTime","endTime","page","location","pathname","isPageHidden","document","visibilityState","self","__NEXT_HMR_LATENCY_CB","latencyMs","HotReload","waitForWebpackRuntimeHotUpdate","mostRecentCompilationHash","Math","round","random","Date","now","reloading","webpackStartMsSinceEpoch","pendingHotUpdateWebpack","Promise","resolve","resolvePendingHotUpdateWebpack","performFullReload","err","stringify","stackTrace","stack","split","slice","join","message","RuntimeErrorHandler","hadRuntimeError","dependencyChain","undefined","reload","assetPrefix","children","globalError","useErrorHandler","dispatcher","onUnhandledError","onUnhandledRejection","webSocketRef","useWebsocket","useWebsocketPing","useSendMessage","useForwardConsoleLog","processTurbopackMessage","useTurbopack","router","useRouter","useUntrackedPathname","appIsrManifestRef","useRef","pathnameRef","useEffect","current","appIsrManifest","onStaticIndicator","reason","DOMException","Error","websocket","handler","obj","parse","data","processMessage","action","HMR_ACTIONS_SENT_TO_BROWSER","ISR_MANIFEST","BUILDING","buildingIndicatorShow","BUILT","SYNC","buildingIndicatorHide","hash","errors","warnings","hasErrors","onVersionInfo","versionInfo","debug","onDebugInfo","onDevIndicator","devIndicator","onDevToolsConfig","devToolsConfig","length","errorCount","clientId","handleErrors","hasWarnings","warningCount","formattedMessages","formatWebpackMessages","i","tryApplyUpdatesWebpack","isUpdateAvailable","__webpack_hash__","module","hot","status","onBuildOk","handleApplyUpdates","onRefresh","check","then","onBeforeRefresh","apply","TURBOPACK_CONNECTED","type","sessionId","TURBOPACK_MESSAGE","turbopackHmr","onTurbopackMessage","SERVER_COMPONENT_CHANGES","cookie","NEXT_HMR_REFRESH_HASH_COOKIE","documentElement","startTransition","hmrRefresh","RELOAD_PAGE","ADDED_PAGE","REMOVED_PAGE","SERVER_ERROR","errorJSON","error","DEV_PAGES_MANIFEST_UPDATE","DEVTOOLS_CONFIG","formatted","onBuildError","reportInvalidHmrMessage","addEventListener","removeEventListener","AppDevOverlayErrorBoundary","ReplaySsrOnlyErrors","onBlockingError","openErrorOverlay","getFlightDataPartsFromPath","getNextFlightSegmentPath","normalizeFlightData","prepareFlightRouterStateForRequest","flightDataPath","segmentPath","flightDataPathLength","tree","seedData","head","isHeadPartial","pathToSegment","segment","isRootRender","flightSegmentPath","flightData","map","flightRouterState","isHmrRefresh","encodeURIComponent","stripClientOnlyDataFromFlightRouterState","refreshMarker","parallelRoutes","_url","isRootLayout","hasLoadingBoundary","cleanedSegment","stripSearchParamsFromPageSegment","startsWith","PAGE_SEGMENT_KEY","cleanedParallelRoutes","Object","entries","key","childState","result","TurbopackHmr","Set","onBuilding","setTimeout","__NEXT_HMR_TURBOPACK_REPORT_NOISY_NOOP_EVENTS","TURBOPACK_HMR_START_DELAY_MS","extractModulesFromTurbopackMessage","updates","Array","isArray","update","instruction","merged","mergedUpdate","keys","name","res","exec","add","msg","onServerComponentChanges","onReloadPage","onPageAddRemove","onBuilt","hasUpdates","clearTimeout","formatConsoleArgs","parseConsoleArgs","formatObject","arg","depth","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","jsonKey","value","String","args","idx","startQuote","char","code","parseInt","parseFloat","environmentName","maybeError","trim","isError","getSocketUrl","prefix","normalizedAssetPrefix","protocol","getSocketProtocol","URL","canParse","replace","hostname","port","url","WebSocket","useCallback","socket","readyState","OPEN","send","onUpdateError","turbopackState","init","queue","callback","push","initCurrent","connect","addMessageListener","cb","websocketRef","useContext","GlobalLayoutRouterContext","interval","setInterval","appDirRoute","clearInterval","REACT_REFRESH_FULL_RELOAD","REACT_REFRESH_FULL_RELOAD_FROM_ERROR","hasBasePath","path","pathHasPrefix","basePath"],"sourceRoot":"","ignoreList":[]}