"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{8809:(e,o,t)=>{t.r(o),t.d(o,{default:()=>l});var n=t(5155),r=t(2115),a=t(7358);function l(e){let{className:o=""}=e,t=(0,r.useRef)(null),l=(0,r.useRef)(null),[i,s]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),p="Matbud Systemy Ppoż",g="Matbud Systemy Ppoż. Sp. z o.o.";encodeURIComponent(p);let m=a.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY||"",u=encodeURIComponent(p),w=()=>{var e;if(t.current&&(null==(e=window.google)?void 0:e.maps))try{let e=new window.google.maps.Map(t.current,{center:{lat:52.2276,lng:16.3656},zoom:15,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0});new window.google.maps.places.PlacesService(e).findPlaceFromQuery({query:p,fields:["name","formatted_address","place_id","geometry","rating","user_ratings_total","opening_hours","website","formatted_phone_number"]},(o,t)=>{if(t===window.google.maps.places.PlacesServiceStatus.OK&&o&&o[0]){var n;let t=o[0];if(null==(n=t.geometry)?void 0:n.location){e.setCenter(t.geometry.location);let o=new window.google.maps.Marker({position:t.geometry.location,map:e,title:t.name||g}),n='\n                <div style="padding: 12px; min-width: 200px;">\n                  <strong style="font-size: 16px;">'.concat(t.name||g,"</strong><br>\n              ");t.formatted_address&&(n+='<div style="margin-top: 8px; color: #666;">'.concat(t.formatted_address,"</div>")),t.rating&&(n+='<div style="margin-top: 8px;">\n                  <span style="color: #f57c00;">★</span> '.concat(t.rating),t.user_ratings_total&&(n+=" (".concat(t.user_ratings_total," opinii)")),n+="</div>"),t.formatted_phone_number&&(n+='<div style="margin-top: 8px;">\uD83D\uDCDE '.concat(t.formatted_phone_number,"</div>")),t.website&&(n+='<div style="margin-top: 8px;"><a href="'.concat(t.website,'" target="_blank" style="color: #1976d2;">Strona internetowa</a></div>')),n+="</div>";let r=new window.google.maps.InfoWindow({content:n});o.addListener("click",()=>{r.open(e,o)}),r.open(e,o)}}else{let o=new window.google.maps.Marker({position:{lat:52.2276,lng:16.3656},map:e,title:g}),t=new window.google.maps.InfoWindow({content:'\n                <div style="padding: 8px;">\n                  <strong>'.concat(g,"</strong><br>\n                  ").concat("Słocin 36F, 62-065 Grodzisk Wielkopolski, Polska","\n                </div>\n              ")});o.addListener("click",()=>{t.open(e,o)}),t.open(e,o)}}),l.current=e,s(!0)}catch(e){c(!0)}};return((0,r.useEffect)(()=>{if(!t.current||l.current||!m){m||c(!0);return}let e=new IntersectionObserver(o=>{o[0].isIntersecting&&((()=>{if(window.google&&window.google.maps)return w();if(document.querySelector('script[src*="maps.googleapis.com"]')){let e=setInterval(()=>{window.google&&window.google.maps&&(clearInterval(e),w())},100);return}let e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=".concat(m,"&loading=async&libraries=places&callback=__initGoogleMaps"),e.async=!0,e.defer=!0,window.__initGoogleMaps=()=>{window.google&&window.google.maps&&t.current&&w()},e.onerror=()=>{c(!0),delete window.__initGoogleMaps},document.head.appendChild(e)})(),e.disconnect())},{rootMargin:"50px"});return t.current&&e.observe(t.current),()=>{e.disconnect(),window.__initGoogleMaps&&delete window.__initGoogleMaps,l.current&&(l.current=null)}},[m]),d||!m)?(0,n.jsx)("div",{className:"bg-card rounded-lg shadow-sm overflow-hidden h-full flex flex-col ".concat(o),children:(0,n.jsx)("iframe",{src:"https://www.google.com/maps?q=".concat(u,"&output=embed&hl=pl&z=15"),width:"100%",height:"100%",style:{border:0,minHeight:"450px"},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"w-full flex-1",title:"Matbud Systemy Ppoż. - Lokalizacja"})}):(0,n.jsxs)("div",{className:"bg-card rounded-lg shadow-sm overflow-hidden h-full flex flex-col ".concat(o),children:[(0,n.jsx)("div",{ref:t,className:"w-full flex-1",style:{minHeight:"450px",zIndex:0}}),!i&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ładowanie mapy..."})]})})]})}}}]);